{"ast":null,"code":"var _jsxFileName = \"/Users/appleone/Documents/Distributed_Systems_Project/client/src/screens/Home.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Vote from \"./Vote\";\nimport Admin from \"./Admin\";\nimport ElectionContract from \"../contracts/Election.json\";\nimport getWeb3 from \"../utils/getWeb3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [role, setRole] = useState(2);\n  const [web3, setWeb3] = useState(null);\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const loadWeb3 = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = ElectionContract.networks[networkId];\n      const instance = new web3.eth.Contract(ElectionContract.abi, deployedNetwork && deployedNetwork.address);\n      setWeb3(web3);\n      setCurrentAccount(accounts[0]);\n      setContract(instance);\n      console.log(\"init\");\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n  const getRole = async () => {\n    if (contract) {\n      const user = await contract.methods.getRole(currentAccount).call();\n      setRole(parseInt(user));\n      console.log(\"role:\");\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    loadWeb3();\n  }, []);\n  useEffect(() => {\n    getRole();\n  }, [contract]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      bgcolor: \"background.default\",\n      color: \"text.primary\",\n      height: \"100vh\"\n    },\n    children: loading ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"80vh\"\n      },\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      children: [role === 1 && /*#__PURE__*/_jsxDEV(Admin, {\n        role: role,\n        contract: contract,\n        web3: web3,\n        currentAccount: currentAccount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), role === 2 && /*#__PURE__*/_jsxDEV(Vote, {\n        role: role,\n        contract: contract,\n        web3: web3,\n        currentAccount: currentAccount\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }, this), role === 3 && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"80vh\"\n        },\n        children: \"Unauthorized User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"SE1W9bEyf961QftwbPUl9pSec30=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","useState","Box","Vote","Admin","ElectionContract","getWeb3","jsxDEV","_jsxDEV","Home","_s","role","setRole","web3","setWeb3","currentAccount","setCurrentAccount","contract","setContract","loading","setLoading","loadWeb3","accounts","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","console","log","error","getRole","user","methods","call","parseInt","sx","bgcolor","color","height","children","display","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/appleone/Documents/Distributed_Systems_Project/client/src/screens/Home.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport Vote from \"./Vote\";\nimport Admin from \"./Admin\";\nimport ElectionContract from \"../contracts/Election.json\";\nimport getWeb3 from \"../utils/getWeb3\";\n\nexport default function Home() {\n  const [role, setRole] = useState(2);\n  const [web3, setWeb3] = useState(null);\n  const [currentAccount, setCurrentAccount] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const loadWeb3 = async () => {\n    try {\n      const web3 = await getWeb3();\n      const accounts = await web3.eth.getAccounts();\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = ElectionContract.networks[networkId];\n      const instance = new web3.eth.Contract(\n        ElectionContract.abi,\n        deployedNetwork && deployedNetwork.address\n      );\n      setWeb3(web3);\n      setCurrentAccount(accounts[0]);\n      setContract(instance);\n      console.log(\"init\");\n      setLoading(false);\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n  };\n\n  const getRole = async () => {\n    if (contract) {\n      const user = await contract.methods.getRole(currentAccount).call();\n      setRole(parseInt(user));\n      console.log(\"role:\");\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    loadWeb3();\n  }, []);\n\n  useEffect(() => {\n    getRole();\n  }, [contract]);\n\n  return (\n    <Box\n      sx={{\n        bgcolor: \"background.default\",\n        color: \"text.primary\",\n        height: \"100vh\",\n      }}\n    >\n      {loading ? (\n        <Box\n          sx={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            height: \"80vh\",\n          }}\n        >\n          Loading...\n        </Box>\n      ) : (\n        <Box>\n          {role === 1 && (\n            <Admin\n              role={role}\n              contract={contract}\n              web3={web3}\n              currentAccount={currentAccount}\n            />\n          )}\n\n          {role === 2 && (\n            <Vote\n              role={role}\n              contract={contract}\n              web3={web3}\n              currentAccount={currentAccount}\n            />\n          )}\n\n          {role === 3 && (\n            <Box\n              sx={{\n                display: \"flex\",\n                justifyContent: \"center\",\n                alignItems: \"center\",\n                height: \"80vh\",\n              }}\n            >\n              Unauthorized User\n            </Box>\n          )}\n        </Box>\n      )}\n    </Box>\n  );\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAOC,IAAI,MAAM,QAAQ;AACzB,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,gBAAgB,MAAM,4BAA4B;AACzD,OAAOC,OAAO,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,eAAe,SAASC,IAAIA,CAAA,EAAG;EAAAC,EAAA;EAC7B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACY,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACc,cAAc,EAAEC,iBAAiB,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACgB,QAAQ,EAAEC,WAAW,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAE5C,MAAMoB,QAAQ,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI;MACF,MAAMR,IAAI,GAAG,MAAMP,OAAO,CAAC,CAAC;MAC5B,MAAMgB,QAAQ,GAAG,MAAMT,IAAI,CAACU,GAAG,CAACC,WAAW,CAAC,CAAC;MAC7C,MAAMC,SAAS,GAAG,MAAMZ,IAAI,CAACU,GAAG,CAACG,GAAG,CAACC,KAAK,CAAC,CAAC;MAC5C,MAAMC,eAAe,GAAGvB,gBAAgB,CAACwB,QAAQ,CAACJ,SAAS,CAAC;MAC5D,MAAMK,QAAQ,GAAG,IAAIjB,IAAI,CAACU,GAAG,CAACQ,QAAQ,CACpC1B,gBAAgB,CAAC2B,GAAG,EACpBJ,eAAe,IAAIA,eAAe,CAACK,OACrC,CAAC;MACDnB,OAAO,CAACD,IAAI,CAAC;MACbG,iBAAiB,CAACM,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC9BJ,WAAW,CAACY,QAAQ,CAAC;MACrBI,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;MACnBf,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACdF,OAAO,CAACE,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;IAChC;EACF,CAAC;EAED,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,IAAIpB,QAAQ,EAAE;MACZ,MAAMqB,IAAI,GAAG,MAAMrB,QAAQ,CAACsB,OAAO,CAACF,OAAO,CAACtB,cAAc,CAAC,CAACyB,IAAI,CAAC,CAAC;MAClE5B,OAAO,CAAC6B,QAAQ,CAACH,IAAI,CAAC,CAAC;MACvBJ,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpBf,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACdqB,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,EAAE,CAAC;EAENrB,SAAS,CAAC,MAAM;IACdqC,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,CAACpB,QAAQ,CAAC,CAAC;EAEd,oBACET,OAAA,CAACN,GAAG;IACFwC,EAAE,EAAE;MACFC,OAAO,EAAE,oBAAoB;MAC7BC,KAAK,EAAE,cAAc;MACrBC,MAAM,EAAE;IACV,CAAE;IAAAC,QAAA,EAED3B,OAAO,gBACNX,OAAA,CAACN,GAAG;MACFwC,EAAE,EAAE;QACFK,OAAO,EAAE,MAAM;QACfC,cAAc,EAAE,QAAQ;QACxBC,UAAU,EAAE,QAAQ;QACpBJ,MAAM,EAAE;MACV,CAAE;MAAAC,QAAA,EACH;IAED;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,gBAEN7C,OAAA,CAACN,GAAG;MAAA4C,QAAA,GACDnC,IAAI,KAAK,CAAC,iBACTH,OAAA,CAACJ,KAAK;QACJO,IAAI,EAAEA,IAAK;QACXM,QAAQ,EAAEA,QAAS;QACnBJ,IAAI,EAAEA,IAAK;QACXE,cAAc,EAAEA;MAAe;QAAAmC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CACF,EAEA1C,IAAI,KAAK,CAAC,iBACTH,OAAA,CAACL,IAAI;QACHQ,IAAI,EAAEA,IAAK;QACXM,QAAQ,EAAEA,QAAS;QACnBJ,IAAI,EAAEA,IAAK;QACXE,cAAc,EAAEA;MAAe;QAAAmC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChC,CACF,EAEA1C,IAAI,KAAK,CAAC,iBACTH,OAAA,CAACN,GAAG;QACFwC,EAAE,EAAE;UACFK,OAAO,EAAE,MAAM;UACfC,cAAc,EAAE,QAAQ;UACxBC,UAAU,EAAE,QAAQ;UACpBJ,MAAM,EAAE;QACV,CAAE;QAAAC,QAAA,EACH;MAED;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EACN;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC3C,EAAA,CAnGuBD,IAAI;AAAA6C,EAAA,GAAJ7C,IAAI;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module"}